/**
 * LBS slide 
 * Date: 2012-5-26 
 **/
!function(a,b){"use strict";var c={linear:function(a){return a},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)},wobble:function(a){return-Math.cos(a*Math.PI*(9*a))/2+.5},swing:function(a){return.5-Math.cos(a*Math.PI)/2},bounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeIn:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOut:function(a){return Math.sin(a*(Math.PI/2))},easeInOut:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,.25)},easeOutBounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*(a*a*(((b*=1.525)+1)*a-b)):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*Math.pow(a,2):-.5*((a-=2)*a-2)},easeInOutCubic:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}},d=function(a){a=a||{},void 0!==a.el&&(this.wrapper="string"==typeof a.el?b.getElementById(a.el):a.el,this.slider=this.wrapper.children[0],this.elements=this.slider.children,this.length=this.elements.length,this.length<1||(a.index>this.length-1&&(a.index=0),this.index=a.index||0,this.oIndex=this.index,this.distance=a.distance||parseInt(this.slider.clientWidth),this.duration=a.duration||400,this.easing=a.easing&&c[a.easing]||c.linear,this.auto=!!a.auto||!1,this.auto&&(this.delay=a.delay||5e3),this.lazyLoad=!!a.lazyLoad||!1,this.attribute=a.attribute||"_src",this.current=a.current||"current",this.pointShow=a.pointShow===!1?!1:!0,this.pointClass=a.pointClass||"slide-point",this.pointEvent=a.pointEvent||"click",this.points=[],this._init()))};d.prototype={_init:function(){this.pointShow&&this._create(),this._initSet(),this._bind()},_create:function(){var a=null,c=0;for(this.pointer=b.createElement("ul");c<this.length;c++)a=b.createElement("li"),a.innerHTML=c+1,a.index=c,this.points.push(a),this.pointer.appendChild(a);this.pointer.className=this.pointClass,this.wrapper.appendChild(this.pointer)},_initSet:function(){"static"===this.css(this.slider,"position")&&(this.slider.style.position="relative");for(var a=0;a<this.length;a++)"none"!==this.css(this.elements[a],"display")&&(this.elements[a].style.display="none"),"absolute"!==this.css(this.elements[a],"position")&&(this.elements[a].style.position="absolute");this.elements[this.index].style.left=0,this.elements[this.index].className+=" "+this.current,this.elements[this.index].style.display="block",this.lazyLoad&&this._loadIMG(this.elements[this.index]),this.pointShow&&(this.points[this.index].className+=" "+this.current)},_bind:function(){var a=this;this.pointShow&&this._event(),this.auto&&(this.play(),this.on(this.wrapper,"mouseover",function(){a.stop()}),this.on(this.wrapper,"mouseout",function(){a.play()}))},_event:function(){var b=this,c=null;this.on(this.pointer,this.pointEvent,function(d){if(!b.amimated){var d=d||a.event,e=d.target||d.srcElement;if("li"===e.tagName.toLowerCase()){if("mouseover"===b.pointEvent)return clearTimeout(c),void(c=setTimeout(function(){b.index=e.index,b._slide()},200));b.index=e.index,b._slide()}}})},_loadIMG:function(a){var b=a.getElementsByTagName("img")[0];b.getAttribute(this.attribute)&&(b.setAttribute("src",b.getAttribute(this.attribute)),b.removeAttribute(this.attribute))},_animate:function(a,b,c,d){var e=parseInt(a.style[b]),f=c,g=f-e,h=this.duration,i=this.easing,j=+new Date;!function k(){var c=+new Date,l=c-j,m=i(l/h);a.style[b]=e+m*g+"px",l>h?(a.style[b]=f+"px",d&&d()):setTimeout(k,20)}()},_slide:function(){if(this.index!==this.oIndex){var a=this,b=0;this.amimated=!0,b=this.index<this.oIndex?-this.distance:this.distance,this.index>this.length-1&&(this.index=0),this.index<0&&(this.index=this.length-1),this.elements[this.index].style.left=b+"px",this.elements[this.index].style.display="block",this.lazyLoad&&this._loadIMG(this.elements[this.index]),this.pointShow&&(this.points[this.index].className+=" "+this.current,this.points[this.oIndex].className=this.points[this.oIndex].className.replace(this.current,"")),this._animate(this.elements[this.oIndex],"left",-b),this._animate(this.elements[this.index],"left",0,function(){a._slideEnd()})}},_slideEnd:function(){this.elements[this.index].className+=" "+this.current,this.elements[this.oIndex].style.display="none",this.elements[this.oIndex].className=this.elements[this.oIndex].className.replace(this.current,""),this.oIndex=this.index,this.amimated=!1},slideLeft:function(){this.amimated||(this.index++,this._slide())},slideRight:function(){this.amimated||(this.index--,this._slide())},play:function(){var a=this;this.timer=setInterval(function(){a.slideLeft()},this.delay)},stop:function(){this.timer&&clearInterval(this.timer),this.timer=null},css:function(a,b){return a.currentStyle?a.currentStyle[b]:getComputedStyle(a,null)[b]},on:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}},"function"==typeof define&&define.amd?define("Slide",[],function(){return d}):a.Slide=d}(window,document);